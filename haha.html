<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>haha</title>
    
    <link rel="stylesheet" href="simple.css">
    <link rel="stylesheet" href="haha.css">
    <script src="haha.js" ></script>
	
	<!-- x3d -->
	
	<script src='https://www.x3dom.org/download/x3dom.js'> </script>
	<link rel='stylesheet' type='text/css' href='https://www.x3dom.org/download/x3dom.css'>
	
	<!--- KaTeX -->
	
	<!-- webfontloader --><script>
  window.WebFontConfig = {
    custom: {
      families: ['KaTeX_AMS', 'KaTeX_Caligraphic:n4,n7', 'KaTeX_Fraktur:n4,n7',
        'KaTeX_Main:n4,n7,i4,i7', 'KaTeX_Math:i4,i7', 'KaTeX_Script',
        'KaTeX_SansSerif:n4,n7,i4', 'KaTeX_Size1', 'KaTeX_Size2', 'KaTeX_Size3',
        'KaTeX_Size4', 'KaTeX_Typewriter'],
    },
  };

</script><script defer src="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js" integrity="sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=" crossorigin="anonymous"></script>
<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          // customised options
          // https://katex.org/docs/autorender.html
          // • auto-render specific keys, e.g.:
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
             {left: '\\[', right: '\\]', display: true}
          ],
          // • rendering keys, e.g.:
          throwOnError : false
       });
    });
</script>
	
  </head>
  
  <body prefix="dc:http://purl.org/dc/terms/">
  
  <header>
    [h1,p=dc:title [i haha]: Half HTML ]
	[nav [a,index.html,c=current home ]  [a,haha-tufte.html [i haha ] &amp; Tufte CSS ]   [a,https://github.com/notsue [img,GitHub-Mark-32px.png,height=15px ] GitHub ]]
  </header>
  
  <main>
  
    [p,p=dc:creator by Sue Not ]
    [p,p=dc:date 2022-08-05 ]
	[p version 0.4 = latest ]
    
    [summary
    [p,p=dc:description [i haha ] is a markup-language, which is mixed with HTML. [i haha ] facilitates writing of HTML-documents. The [i haha ]-markup for elements and attributes reduces typing of HTML-markup by at least 50 % ( [i haha ] = 'Half HTML'). A client-side JavaScript ( [i haha.js ]) converts [i haha ] into HTML5. The browser shows a normal webpage, but if the reader opens the page-source in the same browser, he/she gets the original [i haha ]. The source of this document is 95 % [i haha]. Contrary to many other lightweight markup, there is no seperate haha-document. ]
    ]
 
 
 <nav id="haha-toc">h2,h3 </nav>
  
	[ [u Basic knowledge of HTML is essential ] to learn and use [i haha ] , however 'basic' == 'sufficient'. ]
   
<section> [h2,B=defer haha Markup Language]
		
	[ [mark 1. Tags ] ]
	[ Let's translate some text from HTML to [i haha ].]
    [ [b HTML: ] [code &lt;p&gt;A paragraph with &lt;b&gt;some bold&lt;/b&gt; text.&lt;/p&gt; ] ]
    [ [b haha:] [code \[p A paragraph with \[b some bold \] text. \] ] ]
    [ Elements start with [code \[tagname ] and end with [code \] ]. The opening tag must be preceded and followed by whitespace. The closing bracket doesn't need these whitespaces (these are added by [i haha.js ]). ]
    
    [ [mark 2. Attributes ] ]
    [ [b HTML: ] [code &lt;div class="haha demo" id="nice"&gt;&lt;a href="http://www.abc.org"&gt;abc.org&lt;/a&gt;&lt;/div&gt; ]]
    [ [b haha: ] [code \[div,class=haha_demo,id=nice \[a,href=http://www.abc.org abc.org \] \] ]]
     
    [ One or more attibutes are inserted with a comma-separated list of [code name=value ] pairs. Use underscore to insert whitespaces in values of attributes.
    The [i haha]-Javascript will however not replace underscore with whitespace in values of attributes [code id, href, cite, action ] and [code src ]. ]
	
	[ Boolean attributes are inserted with [code B=attributename ] [FN The boolean attributes are: [code 'allowfullscreen', 'async', 'autofocus', 'autoplay', 'checked', 'controls', 'default', 'defer', 'disabled', 'formnovalidate', 'ismap', 'itemscope', 'loop', 'multiple', 'muted', 'nomodule', 'novalidate', 'open', 'playsinline', 'readonly', 'required', 'reversed', 'selected', 'truespeed' ]. As explained in the MDN Web Docs: [i HTML5 defines restrictions on the allowed values of boolean attributes: If the attribute is present, its value must either be the empty string (equivalently, the attribute may have an unassigned value), or a value that is an ASCII case-insensitive match for the attribute’s canonical name, with no leading or trailing whitespace.]].]
    
    [ Rule: [b There should be no whitespace in the opening tag and its attributes. ] ]
    
    [ [mark 3. Short names for popular attributes ] ]
    
    [ [b HTML: ] [code &lt;div class="haha demo" id="nice"&gt;&lt;a href="http://x.org"&gt;site x.org&lt;/a&gt;&lt;/div&gt; ]]
    [ [b haha: ] [code \[div,c=haha_demo,i=nice \[a,h=http://x.org site x.org \] \] ]]
    
    [ Very often one letter is sufficient for the name of an attribute. ] 
    
    [table
    [tr [th Short ] [th Full name] ]
    [tr [ c ] [ class]]
    [tr [ i ] [ id ]]
    [tr [ h ] [ href]]
    [tr [ t ] [ title ]]
    [tr [ a  ] [ alt ]]
    [tr [ s ] [ src ]]
    [tr [ l ] [ lang]]
    [tr [ p ] [ property (RDFa Lite) [FN RDFa Lite is a minimal subset of RDFa, the Resource Description Framework in attributes, consisting of a few attributes that may be used to express machine-readable data in Web documents like HTML, SVG, and XML. While it is not a complete solution for advanced data markup tasks, it does work for most day-to-day needs and can be learned by most Web authors in a day.  [a,https://www.w3.org/TR/rdfa-lite/ W3C recommendation] . See also: [a,https://en.wikipedia.org/wiki/RDFa WikiPedia:RDFa ] ]]]
    ]
    
    [ [mark 4. Nameless attributes]]
    
    [ If an attribute has no name, it is interpretreted as [code class ] . A nameless
    attibute in element [code a ] is interpreted as [code href ] . In element [code img ] it means [code src ]. ]
    
    
    [ [b HTML: ] [code &lt;div class="haha demo" id="nice"&gt;&lt;a href="http://x.org"&gt;site x.org&lt;/a&gt;&lt;/div&gt; ]]
    
    [ [b haha: ] [code \[div,haha_demo,i=nice \[a,http://x.org site x.org \] \] ]]
	
	[ Nameless attributes can appear anywhere in the list of attributes. ]
    
	[ [mark 5. Nameless tags ]]
    
    [ If an opening tag has no tagname it is interpreted as a [code p-tag ]. When the element is a child of [code ol] or [code ul] the nameless tag is interpreted as [code li ]. When the element is child of [code tr ] it is interpreted as [code td].] 
    
    
    [ Demo with nested lists: ]
    
    <pre>
    [ol 
    [ item one ] 
    [ item two: 
      [ul 
      [ nested a ]
      [ nested b ]
      ] 
    ]
    [ and three ] 
    ]
    </pre>
    
    [ Result: ]
    [ol 
    [ item one ] 
    [ item two:  
      [ul
      [ nested a ]
      [ nested b ]
      ] 
    ]
    [ item three ] 
    ]
    
    [ Markup of a table: ]
    
    
    <pre><code>
    [table
    [tr [th Short ] [th Full name] ]
    [tr [ c ] [ class]]
    [tr [ i ] [ id ]]
    ]
    </code></pre>
    
    [ Attributes in nameless tags? Business as usual. ]
    
    [ [b haha:] [code \[,demo_haha,i=nice,style=color:green; Paragraph with one nameless attribute, a short attribute and style.\] ]]
    
    [ [b Output:] [span,demo_haha,i=nice,style=color:green;  Paragraph with one nameless attribute, a short attribute and style.] ]
    
    [ [mark 6. Last but not least ]]
    
    [ If square brackets are part of your content, use backward slash as escape-sign: [code \\[ ] and [code \\] ] produces [code \[ ] and [code \]]. ]
     
    [ [b haha:] [code \[ Some text with &lt;b&gt;Normal&lt;/b&gt;&lt;i&gt;HTML&lt;/i&gt;. Here it is used to glue bold and italic text, which is not possible with haha. \] ]]
    
	
    [ [b Output: ] Some text with <b>Normal</b><i>HTML</i>. Here HTML is used to glue bold and italic text, ... ]
	
	</section>
<section> [h2 haha JavaScript]
	
	[h3 haha &amp; HTML ]
    
    [ The client side JavaScript [i haha.js ] converts all haha-markup inside the body-element. ]
    
    [ A small example: ]

<pre><code>
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;haha template&lt;/title&gt;
    &lt;link rel="stylesheet" href="simple.css"&gt;
    &lt;link rel="stylesheet" href="haha.css"&gt;
    &lt;script src="haha.js" &gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
        
    [h1 A header ]
    [ A paragraph with [b bold ] and [i italic ] text. 
	 And a link: [a,http://github/notsue Notsue ]]
        
    [table
    [tr [th Element ] [th Nameless attribute ] ]
    [tr [ a ] [ href ]]
    [tr [ img ] [ src ]]
    [tr [ other ] [ class ]]
    ]
    
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

	[ Now it's time to learn by doing. Copy the example and store it as html-file in a map, together with [i haha.js, simple.css ] and [i haha.css ].]
	
	[ Open the html-file in a browser. ]
	
	[ Open the html-file in an editor. Add some haha-markup: a paragraph with a link, a small ordered list, a table with 2 x 2 cells, ... Save your changes and reload the html-file in your browser. ]
	
	[figure [img,hahaIDE.png,width=960,height=540 ] [figcaption IDE for haha: a browser with console (right) and an editor (left) ]]
	
	[ The editor should highlight corresponding square brackets. The HTML-settings work fine in Notepad++. The 'inspector' and 'console' of Firefox (Shift Ctrl K) are great tools for debugging. ] 
	
	
	
	[h3 Footnotes]
	
	[ We needed less than 200 lines of JavaScript to implement the haha-parser. But we've added some extra services: automatic collection and numbering of footnotes, and the creation of a table of contents. ]
	
	[ To start the footnote-script there must be an empty div-element with [code id="haha-footnotes"]. That's where the footnotes will be placed in the HTML-document. The content of one footnote is written in a [code \[FN \] ] element. [i haha.js ] replaces 
	this element by a number and moves the content to a numbered list of footnotes inside the element with id="haha-footnotes". Simple. ]
	
	[ The numbers are links to the footnotes, and backlinks ( [code ⮍ ]) bring you back to the number. ]
	
	[ [i haha.js ] can also cooperate with [em Tufte CSS], a stylesheet that facilitates the use of sidenotes and margin notes. See our [a,haha-tufte.html [i haha] &amp; Tufte CSS ]]
    
    [h3 Table of contents ]
	
	[ To start the toc-script there must be a div- or nav-element with  [code id="haha-toc"]. That's where the table of contents will be placed in the HTML-document. If this div-element has no 'innerHTML', all the headers (from h1 tot h6) will be collected. You can however select only h2- and h3-headers for example, with [code &lt;div id="haha-toc"&gt;h2, h3&lt;/div&gt; ], a comma-seperated list of the prefered headers. ]
	
	[ The table of contents is a list with links to the headers in the document. ] 
	
	[h3 &lt;pre&gt; ]
	
	[ Try this: haha mixed with a html-pre-element. ]
	
<pre><code>
...
&lt;body&gt;
  [ ... some haha ... ]
  
  &lt;pre&gt;&lt;code&gt;
  /* some css code  to demonstrate */
  #haha-toc {border-left: solid 1px; margin-left: 1rem;}
  &lt;/code&gt;&lt;/pre&gt;
  
  [ ... more haha ... ]
&lt;/body&gt;
	
</code></pre>


	[ So, you do not have to learn how [i pre-elements ] are inserted in haha-markup. Just switch to HTML. [i haha.js ] removes the content of pre-elements, then parses
	 all haha-markup, and places content of pre-elements back in place. The content of pre-elements is therefore never interpreted as haha-markup. ]
	
	[h3 &lt;script&gt; ]
	
	[ If there are script-elements inside the body, these will be excecuted before [i haha.js ] does his job. This means:	]
	[ul
	[ If script uses a HTML-element ( for example: [code document.getElementbyId... ] ), this element should not be written in haha-markup. It must exist as HTML. ]
	[ We can use strings in haha-markup in a script, assuming that tese will be converted to HTML. ]
	]

	[ Example: ]
<pre><code>
&lt;div id="script-one"&gt;&lt;/div&gt;
&lt;script&gt;
console.log("script one");
var D = document.getElementById('script-one');
const cars = ["Saab", "Volvo", "BMW"];
let car = cars[0];
s = ' [ I am [b a demo script.] My array of cars: ' + cars.toString() + '. The first car is:  ' +  car + ' ]';
D.innerHTML = s;
function changeBackground(BackgroundColor) {
		document.getElementById("script-one").style.backgroundColor=BackgroundColor;
		}
		
&lt;/script&gt;
[ [button,onclick=changeBackground('yellow') Yellow ] [button,onclick=changeBackground('green') Green ] ]
</code></pre>

	[ Result: ]
	
	<div id="script-one"></div>
	<script>
	console.log("script one");
	var D = document.getElementById('script-one');
	const cars = ["Saab", "Volvo", "BMW"];
	let car = cars[0];
	s = ' [ I am [b a demo script.] My array of cars: ' + cars.toString() + '. The first car is:  ' +  car + ' ]';
	D.innerHTML = s;
	function changeBackground(BackgroundColor) {
		document.getElementById("script-one").style.backgroundColor=BackgroundColor;
		}
		
	</script>
	[ [button,onclick=changeBackground('yellow') Yellow ] [button,onclick=changeBackground('green') Green ] ]
	
	[ [b Why do we not have problems with brackets in script? ] Because [i haha.js ] removes all te content of script-elements, before it starts
	parsing haha-markup.  ]
	[ [b What about my functions? ] They are all stored, somewhere in the browsers memory. ]
	
	[ External scripts are not touched. A browser does not write to files. ]
	
	[ This is a code example that belongs to the article: [a,https://rembound.com/articles/drawing-mandelbrot-fractals-with-html5-canvas-and-javascript Drawing Mandelbrot Fractals With HTML5 Canvas And JavaScript ]  ]

[ Zoom the fractal by clicking on a part of the fractal. Holding Control while zooming will use the zoom-out function. Holding Shift while zooming will use the pan function.
The full source code is available on [a,https://github.com/rembound/Mandelbrot-Fractal-HTML5 GitHub ]. ]

<canvas id="viewport" width="640" height="480"></canvas>
<script src="mandelbrot-fractal.js"></script>
	

	
	[h3 SVG and MathML ]

[ SVG can be written in haha-markup, HTML or a mixture of both. If attribute-values have a lot of whitespaces (path), HTML may
  be a better option. ]
	
<pre><code>
[svg,width=100,height=100
[circle,cx=50,cy=50,r=40,stroke=green,stroke-width=4,fill=yellow ] 
]
</code></pre>

[ Result: ]
		
	[svg,width=100,height=100
	[circle,cx=50,cy=50,r=40,stroke=green,stroke-width=4,fill=yellow ] 
	]
	
<pre><code>
[ The area of a circle is [math [mi &amp;pi;] [mo &amp;InvisibleTimes;] [msup [mi r] [mn 2]] ] ]

[ Here is Einstein's mass-energy equivalence: ]
  [math,display=block
	[mrow
	  [mi E] [mo =] [mi m] [mo ] [msup [mi c] [mn 2 ]]
	]
  ]
  
[ Quadratic formula: ]
[blockquote
  [math,display=block
	  [mi x] [mo =]
	  [mfrac
	    [mrow [mo -] [mi b] [mo ± ] [msqrt [msup [mi b ] [mn 2]] 
		      [mo -] [mn 4 ] [mi a ] [mo &amp;InvisibleTimes; ] [mi c] ] ]
	    [mrow [mn 2] [mi a]]
	  ]
  ]
]
</code></pre>
	
[ The area of a circle is [math [mi &pi;] [mo &InvisibleTimes;] [msup [mi r] [mn 2]] ] ]

[ Here is Einstein's mass-energy equivalence: ]

		  [math,display=block
		    [mrow
		      [mi E] [mo =] [mi m] [mo ] [msup [mi c] [mn 2 ]]
		    ]
		  ]
		  
[ Quadratic formula: ]
[blockquote
  [math,display=block
	  [mi x] [mo =]
	  [mfrac
	    [mrow [mo -] [mi b] [mo ± ] [msqrt [msup [mi b ] [mn 2]] 
		      [mo -] [mn 4 ] [mi a ] [mo &InvisibleTimes; ] [mi c] ] ]
	    [mrow [mn 2] [mi a]]
		
	  ]
	
  ]
]
</section>

<section> [h2 Using other applications ]
	 
	[H3 KaTeX ] 

[ Like Mathjax.js, KaTeX renders LaTeX. Here we use [a,https://katex.org/ KaTeX ] with the [a,https://katex.org/docs/autorender.html [em auto-render extension ]]. Inline, the delimiters are single dollar signs. We get block diplay by using double dollar signs. ]

<pre><code>
[ This is inline: $ e^{i\pi} + 1 = 0 $ . Next is block display: ] 

[ $$f(x) = \int_{-\infty}^\infty \widehat{f}(\xi)\,e^{2 \pi i \xi x}\,d\xi$$ ] 
</code></pre>


[ This is inline: $ e^{i\pi} + 1 = 0 $ . Next is block display: ] 

[ $$f(x) = \int_{-\infty}^\infty \widehat{f}(\xi)\,e^{2 \pi i \xi x}\,d\xi$$ ] 

[h3 x3d ]

[ Some x3d, partially haha, partially xml (some attribute-values contain commas). ]

<pre><code>
[style
x3d {border:solid 1px black;
background:#000 url(http://www.x3dom.org/x3dom/example/texture/solarSystem/starsbg.png);
}
]

[x3d,width=200px,height=200px
[scene
  [shape
	[appearance
	   &lt;Material ambientIntensity='0.4' diffuseColor='0.8,0.8,0.0'
	   emissiveColor='0,0,0' metadata='X3DMetadataObject' 
	    shininess='0.2' specularColor='0,0,0' transparency='0.5'&gt;&lt;/Material&gt;
	] 
	[box ] 
  ]
]
]
</pre></code>
[style
x3d {border:solid 1px black;
background:#000 url(http://www.x3dom.org/x3dom/example/texture/solarSystem/starsbg.png);
}
]

[x3d,width=200px,height=200px
	   [scene
        [shape
		   [appearance
			 <Material ambientIntensity='0.4' diffuseColor='0.8,0.8,0.0' emissiveColor='0,0,0' metadata='X3DMetadataObject' shininess='0.2' specularColor='0,0,0' transparency='0.5'></Material>
		   ] 
		   [box ] 
		]
		]
]

[ Use left mouse-button to rotate cube and right mouse button to zoom in and out. Of course, you need some extra stuff in the head-element of yout HTML-file: ]
  
  <pre><code>
  &lt;script src='https://www.x3dom.org/download/x3dom.js'&gt;&lt;/script&gt;
  &lt;link rel='stylesheet' type='text/css'
      href='https://www.x3dom.org/download/x3dom.css' &gt;
  </code></pre>
  
</section>

[h2 CSS ]
    
    [ Here we used [a,https://simplecss.org/ simple.css ]. Simple.css was created by [a,https://kevq.uk/ Kev Quirk ] and is licensed under the MIT license. Also at  [a,https://github.com/kevquirk/simple.css Github ] . ]
	
	[ The style of the table of contents and the footnotes is managed in a seperate 
	  stylesheet [i haha.css ]]
	  
	[ Please visit our [a,haha-tufte.html [i haha ] &amp; Tufte CSS ]]
	  
[h2 License ]
	
	[ haha.js: GNU GPLv2 ]
	[ haha.css: GNU GPLv2 ]
	[ This document: [a,https://creativecommons.org/licenses/by/4.0/ Creative Commons Attribution 4.0 International license.] ]
    

<h2>Notes</h2>
<div id="haha-footnotes"></div>

</main>
<footer>
</footer>
</body>
</html>
